<div id="osd" class="image-viewer"></div>
<script defer src="{{ '/assets/openseadragon/openseadragon.min.js' | absolute_url }}"></script>

<script>
  $(document).ready(function () {
    OpenSeadragon({
      id: "osd",
      preload: true,
      showNavigationControl: true,
      showNavigator: true,
      showZoomControl: true,
      showHomeControl: true,
      showFullPageControl: true,
      showRotationControl: true,
      panHorizontal: true,
      defaultZoomLevel: 0,
      zoomPerScroll: 1.2,
      visibilityRatio: 1,
      minZoomLevel: 0.5,
      prefixUrl: "{{ '/assets/openseadragon/images/' | absolute_url }}",
      {% if page.img_list.size > 1 %}
      sequenceMode: true,
      showReferenceStrip: true,
      tileSources: [
        {% for img in page.img_list %}
        {
          type: 'image',
          url:  '{{ img.full | absolute_url }}',
          referenceStripThumbnailUrl: '{{ img.thumbnail | absolute_url }}',
          buildPyramid: false
        }{% unless forloop.last %}, {% endunless %}
        {% endfor %}
      ]
      {% else %}
      tileSources: {
        type: 'image',
        url:  '{{ page.full | absolute_url}}',
        buildPyramid: false
      },
      {% endif %}
    });
  });
</script>
